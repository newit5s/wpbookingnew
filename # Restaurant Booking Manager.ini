# Restaurant Booking Manager

Plugin quản lý đặt bàn nhà hàng hoàn chỉnh cho WordPress với giao diện thân thiện và tính năng đầy đủ.

## 📋 Tính năng chính

### Frontend
- ✅ Form đặt bàn responsive, thân thiện mobile
- ✅ Kiểm tra chỗ trống real-time với AJAX
- ✅ Validation đầy đủ và UX tối ưu
- ✅ Hiển thị trạng thái chỗ ngồi trực quan
- ✅ Email xác nhận tự động

### Backend (Admin)
- ✅ Dashboard quản lý đặt bàn trực quan
- ✅ Xác nhận/Hủy đặt bàn với 1 click
- ✅ Thống kê và báo cáo chi tiết
- ✅ Lọc và tìm kiếm nâng cao
- ✅ Quản lý sức chứa linh hoạt

### Tự động hóa
- ✅ Email thông báo admin khi có booking mới
- ✅ Email xác nhận khách hàng khi được duyệt
- ✅ Quản lý capacity thông minh theo khung giờ
- ✅ Security và validation toàn diện

## 📁 Cấu trúc Plugin

```
restaurant-booking-manager/
├── restaurant-booking-manager.php     # File chính
├── includes/                          # Core classes
│   ├── class-restaurant-booking-manager.php
│   ├── class-database.php
│   ├── class-admin.php
│   ├── class-frontend.php
│   ├── class-ajax.php
│   ├── class-email.php
│   └── functions.php
├── templates/                         # Templates
│   ├── frontend/
│   │   └── booking-form.php
│   └── admin/
│       ├── bookings-page.php
│       └── settings-page.php
├── assets/                           # CSS & JS
│   ├── css/
│   │   ├── frontend.css
│   │   └── admin.css
│   └── js/
│       ├── frontend.js
│       └── admin.js
└── README.md
```

## 🚀 Cài đặt

### Cách 1: Upload thủ công
1. Tải toàn bộ folder `restaurant-booking-manager`
2. Upload vào `/wp-content/plugins/`
3. Kích hoạt plugin trong WordPress Admin
4. Thêm shortcode vào trang muốn hiển thị

### Cách 2: Tạo file zip
1. Nén toàn bộ folder thành `restaurant-booking-manager.zip`
2. Upload qua WordPress Admin > Plugins > Add New > Upload
3. Kích hoạt plugin

## 📝 Sử dụng

### Hiển thị form đặt bàn
Thêm shortcode sau vào trang hoặc bài viết:

```
[restaurant_booking_form]
```

### Tùy chỉnh shortcode
```
[restaurant_booking_form capacity="50" max_party_size="10" start_time="09:00" end_time="23:00"]
```

### Các tham số shortcode:
- `capacity` - Sức chứa tùy chỉnh (mặc định: 50)
- `max_party_size` - Số khách tối đa/lần đặt (mặc định: 15)  
- `start_time` - Giờ mở cửa (mặc định: 10:00)
- `end_time` - Giờ đóng cửa (mặc định: 22:00)

## 🔧 Cấu hình

### Cài đặt cơ bản
1. Vào **Đặt bàn > Cài đặt**
2. Điều chỉnh sức chứa tối đa
3. Lưu cài đặt

### Quản lý đặt bàn
1. Vào **Đặt bàn > Danh sách** 
2. Xem danh sách đặt bàn
3. Xác nhận/Hủy bằng các nút action
4. Sử dụng bộ lọc để tìm kiếm

## 📊 Quy trình hoạt động

1. **Khách đặt bàn** → Điền form trên website
2. **Kiểm tra chỗ** → Hệ thống tự động kiểm tra
3. **Lưu booking** → Trạng thái "Chờ xác nhận"
4. **Email admin** → Thông báo tự động ngay lập tức
5. **Admin duyệt** → Xác nhận/Hủy trong dashboard  
6. **Email khách** → Thông báo kết quả tự động

## 🛠 Tính năng kỹ thuật

### Database
- Tự động tạo 2 bảng: `restaurant_bookings` và `restaurant_daily_capacity`
- Indexes tối ưu cho hiệu suất
- Clean uninstall (xóa data khi gỡ plugin)

### Security  
- Nonce verification cho tất cả AJAX calls
- Data sanitization và validation
- SQL injection protection
- XSS prevention

### Performance
- Conditional loading (chỉ load khi cần)
- AJAX pagination
- Optimized database queries
- CSS/JS minification ready

## 🎨 Tùy chỉnh giao diện

### CSS Classes chính
- `.rbm-booking-form-container` - Container chính
- `.rbm-form-group` - Nhóm form field  
- `.rbm-availability-info` - Thông tin chỗ trống
- `.status-pending/confirmed/cancelled` - Trạng thái booking

### Responsive Design
- Mobile-first approach
- Flexible layout
- Touch-friendly buttons
- Optimized for all screen sizes

## 🔌 Mở rộng

Plugin được thiết kế modular, dễ dàng mở rộng:

### Thêm tính năng mới
- Tạo class mới trong `/includes/`
- Hook vào `init_classes()` trong main class
- Thêm template tương ứng

### Tùy chỉnh email
- Edit methods trong `class-email.php`
- Tạo template email riêng
- Hook vào WordPress mail system

## 📞 Hỗ trợ

### Troubleshooting phổ biến

**Form không hiển thị:**
- Kiểm tra shortcode đã đúng chưa
- Đảm bảo jQuery được load
- Check console browser có lỗi JS không

**AJAX không hoạt động:**
- Verify nonce đã đúng
- Check admin-ajax.php accessible
- Kiểm tra network tab trong DevTools

**Email không gửi:**
- Test WordPress mail function
- Kiểm tra SMTP settings
- Check spam folder

### Debug Mode
Bật WP_DEBUG để xem log chi tiết:
```php
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
```

## 📋 Requirements

- WordPress 5.0+
- PHP 7.4+
- MySQL 5.6+
- jQuery (included in WordPress)

## 🔄 Changelog

### Version 1.0.0
- Initial release
- Complete booking system
- Admin dashboard
- Email notifications
- Responsive design
- Security hardening

## 📄 License

GPL v2 or later

---

🎯 **Developed with ❤️ for Vietnamese restaurants**

Plugin này được thiết kế đặc biệt cho thị trường Việt Nam với ngôn ngữ và UX phù hợp văn hóa địa phương.